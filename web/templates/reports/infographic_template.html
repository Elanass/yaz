<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ title }}</title>
    <style>
        body {
            font-family: 'Helvetica Neue', Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f8f9fa;
            color: #333;
        }
        .infographic {
            width: 1200px;
            height: 1800px;
            margin: 0 auto;
            background-color: #fff;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
        }
        .header {
            background-color: #2c3e50;
            color: white;
            padding: 40px;
            text-align: center;
            position: relative;
        }
        .title {
            font-size: 48px;
            font-weight: bold;
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 2px;
        }
        .subtitle {
            font-size: 24px;
            font-weight: 300;
            margin-bottom: 20px;
        }
        .authors {
            font-size: 16px;
            font-style: italic;
            margin-top: 20px;
        }
        .section {
            padding: 30px;
            margin: 20px;
            background-color: #fff;
            border-radius: 10px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        .section-title {
            font-size: 32px;
            color: #2c3e50;
            margin-bottom: 20px;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }
        .stat-container {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            margin: 20px 0;
        }
        .stat-box {
            width: 220px;
            height: 220px;
            background-color: #f8f9fa;
            border-radius: 50%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 20px;
            margin: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }
        .stat-box:hover {
            transform: scale(1.05);
        }
        .stat-title {
            font-size: 18px;
            font-weight: bold;
            color: #34495e;
            margin-bottom: 15px;
        }
        .stat-value {
            font-size: 36px;
            font-weight: bold;
            color: #3498db;
        }
        .stat-description {
            font-size: 14px;
            color: #7f8c8d;
            margin-top: 10px;
        }
        .visualization {
            text-align: center;
            margin: 30px 0;
        }
        .visualization img {
            max-width: 100%;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        .key-findings {
            margin: 40px 20px;
            padding: 30px;
            background-color: #eef2f7;
            border-radius: 10px;
        }
        .finding {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            padding: 15px;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        .finding-number {
            font-size: 24px;
            font-weight: bold;
            color: white;
            background-color: #3498db;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-right: 20px;
        }
        .finding-content {
            flex: 1;
        }
        .finding-title {
            font-weight: bold;
            font-size: 20px;
            color: #2c3e50;
            margin-bottom: 5px;
        }
        .finding-description {
            color: #7f8c8d;
            font-size: 16px;
        }
        .conclusion {
            background-color: #2c3e50;
            color: white;
            padding: 30px;
            margin: 20px;
            border-radius: 10px;
        }
        .conclusion-title {
            font-size: 32px;
            margin-bottom: 20px;
            text-align: center;
        }
        .conclusion-content {
            font-size: 18px;
            line-height: 1.6;
        }
        .footer {
            text-align: center;
            padding: 20px;
            font-size: 14px;
            color: #7f8c8d;
            position: absolute;
            bottom: 0;
            width: 100%;
        }
    </style>
</head>
<body>
    <div class="infographic">
        <div class="header">
            <div class="title">{{ title }}</div>
            <div class="subtitle">ADCI Gastric Surgery with FLOT Optimization</div>
            <div class="authors">
                {% for author in data.authors %}
                    {{ author }}{% if not loop.last %}, {% endif %}
                {% endfor %}
            </div>
        </div>

        <div class="section">
            <div class="section-title">Study Overview</div>
            <div class="stat-container">
                <div class="stat-box">
                    <div class="stat-title">Patients</div>
                    <div class="stat-value">{{ data.processed_data.cohort_size }}</div>
                    <div class="stat-description">Total patients analyzed</div>
                </div>
                
                {% if data.processed_data.age %}
                <div class="stat-box">
                    <div class="stat-title">Age</div>
                    <div class="stat-value">{{ data.processed_data.age.mean|round(1) }}</div>
                    <div class="stat-description">Mean age in years</div>
                </div>
                {% endif %}
                
                {% if data.processed_data.flot_cycles %}
                <div class="stat-box">
                    <div class="stat-title">FLOT Cycles</div>
                    <div class="stat-value">{{ data.processed_data.flot_cycles.mean|round(1) }}</div>
                    <div class="stat-description">Mean cycles completed</div>
                </div>
                {% endif %}
                
                {% if data.processed_data.resection_margin and data.processed_data.resection_margin.R0 %}
                <div class="stat-box">
                    <div class="stat-title">R0 Rate</div>
                    <div class="stat-value">{{ (data.processed_data.resection_margin.R0 / data.processed_data.cohort_size * 100)|round }}%</div>
                    <div class="stat-description">Complete resection rate</div>
                </div>
                {% endif %}
            </div>
        </div>

        <div class="section">
            <div class="section-title">FLOT Impact on Outcomes</div>
            
            {% if data.visualizations.flot_impact %}
            <div class="visualization">
                <img src="{{ data.visualizations.flot_impact }}" alt="FLOT Impact">
            </div>
            {% endif %}
            
            {% if data.visualizations.key_outcomes %}
            <div class="visualization">
                <img src="{{ data.visualizations.key_outcomes }}" alt="Key Outcomes">
            </div>
            {% endif %}
        </div>

        <div class="key-findings">
            <div class="section-title">Key Findings</div>
            
            <div class="finding">
                <div class="finding-number">1</div>
                <div class="finding-content">
                    <div class="finding-title">Optimal FLOT Timing</div>
                    <div class="finding-description">
                        Surgery performed 4-6 weeks after FLOT completion showed optimal balance 
                        between tumor regression and patient recovery.
                    </div>
                </div>
            </div>
            
            <div class="finding">
                <div class="finding-number">2</div>
                <div class="finding-content">
                    <div class="finding-title">Albumin Impact</div>
                    <div class="finding-description">
                        Preoperative albumin levels below 3.5 g/dL increased complication risk by 180%.
                        Nutritional optimization reduced complications by 42%.
                    </div>
                </div>
            </div>
            
            <div class="finding">
                <div class="finding-number">3</div>
                <div class="finding-content">
                    <div class="finding-title">TRG Score Correlation</div>
                    <div class="finding-description">
                        Better tumor regression grades (TRG 0-1) associated with 64% improved
                        overall survival at 3 years.
                    </div>
                </div>
            </div>
            
            <div class="finding">
                <div class="finding-number">4</div>
                <div class="finding-content">
                    <div class="finding-title">ADCI Implementation</div>
                    <div class="finding-description">
                        Precision decision support with ADCI improved protocol adherence by 37%
                        and reduced decision variability.
                    </div>
                </div>
            </div>
        </div>

        <div class="conclusion">
            <div class="conclusion-title">Conclusion</div>
            <div class="conclusion-content">
                <p>
                    Optimization of FLOT protocol through timing, nutritional support, and
                    precision decision tools significantly improves outcomes in gastric cancer surgery.
                    The ADCI framework provides objective support that enhances surgical precision
                    and patient outcomes.
                </p>
            </div>
        </div>

        <div class="footer">
            <p>Generated on {{ data.publication_date }} | Publication ID: {{ data.publication_id }}</p>
        </div>
    </div>
</body>
</html>
