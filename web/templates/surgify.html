{% extends "surgify-base.html" %}

{% block title %}Surgify - Clinical Research Interface{% endblock %}

{% block content %}
<!-- Surgify Main Interface -->
<div class="surgify-container">
    
    <!-- Search Section -->
    <section class="surgify-p-6">
        <div class="surgify-search mx-auto max-w-lg">
            <svg class="surgify-search-icon w-5 h-5" fill="currentColor" viewBox="0 0 256 256">
                <path d="M229.66,218.34l-50.07-50.06a88.11,88.11,0,1,0-11.31,11.31l50.06,50.07a8,8,0,0,0,11.32-11.32ZM40,112a72,72,0,1,1,72,72A72.08,72.08,0,0,1,40,112Z"></path>
            </svg>
            <input type="text" placeholder="Search patients, cases, protocols..." class="surgify-search-input surgify-input">
        </div>
    </section>

    <!-- Category Tabs -->
    <section class="surgify-p-6">
        <div class="surgify-tabs">
            <button class="surgify-tab active" data-category="journal">
                Journal
                <svg class="w-4 h-4 ml-1" fill="currentColor" viewBox="0 0 256 256">
                    <path d="M213.66,101.66l-80,80a8,8,0,0,1-11.32,0l-80-80A8,8,0,0,1,53.66,90.34L128,164.69l74.34-74.35a8,8,0,0,1,11.32,11.32Z"></path>
                </svg>
            </button>
            <button class="surgify-tab" data-category="events">
                Events
                <svg class="w-4 h-4 ml-1" fill="currentColor" viewBox="0 0 256 256">
                    <path d="M213.66,101.66l-80,80a8,8,0,0,1-11.32,0l-80-80A8,8,0,0,1,53.66,90.34L128,164.69l74.34-74.35a8,8,0,0,1,11.32,11.32Z"></path>
                </svg>
            </button>
            <button class="surgify-tab" data-category="series">
                Series
                <svg class="w-4 h-4 ml-1" fill="currentColor" viewBox="0 0 256 256">
                    <path d="M213.66,101.66l-80,80a8,8,0,0,1-11.32,0l-80-80A8,8,0,0,1,53.66,90.34L128,164.69l74.34-74.35a8,8,0,0,1,11.32,11.32Z"></path>
                </svg>
            </button>
        </div>
    </section>

    <!-- Featured Series -->
    <h2 class="px-4 pt-5 pb-3 text-[22px] font-bold text-[#141414]">Featured Series</h2>
    <div class="flex overflow-x-auto scrollbar-hidden p-4 gap-3">
      {% for series in featured_series %}
      <div class="min-w-[60px] flex flex-col gap-4 rounded-lg" 
           hx-get="/series/{{ series.id }}/peek" 
           hx-trigger="mouseenter" 
           hx-target="#peek-{{ series.id }}" 
           hx-swap="afterend">
        <div class="aspect-video bg-cover rounded-xl" style="background-image: url('{{ series.image_url }}');"></div>
        <p class="text-base font-medium text-[#141414]">{{ series.title }}</p>
        <p class="text-sm text-neutral-500">{{ series.author }}</p>
      </div>
      <div id="peek-{{ series.id }}" class="absolute z-10 bg-white shadow-lg hidden"></div>
      {% endfor %}
    </div>

    <!-- Upcoming Events -->
    <h2 class="px-4 pt-5 pb-3 text-[22px] font-bold text-[#141414]">Upcoming Events</h2>
    <div class="flex overflow-x-auto scrollbar-hidden p-4 gap-3">
      {% for event in upcoming_events %}
      <div class="min-w-[60px] flex flex-col gap-4 rounded-lg" 
           hx-get="/events/{{ event.id }}/peek" 
           hx-trigger="mouseenter" 
           hx-target="#peek-event-{{ event.id }}" 
           hx-swap="afterend">
        <div class="aspect-video bg-cover rounded-xl" style="background-image: url('{{ event.image_url }}');"></div>
        <p class="text-base font-medium text-[#141414]">{{ event.title }}</p>
        <p class="text-sm text-neutral-500">{{ event.date }}</p>
      </div>
      <div id="peek-event-{{ event.id }}" class="absolute z-10 bg-white shadow-lg hidden"></div>
      {% endfor %}
    </div>

    <!-- Latest Journal Articles -->
    <h2 class="px-4 pt-5 pb-3 text-[22px] font-bold text-[#141414]">Latest Journal Articles</h2>
    <div class="p-4 space-y-4">
      {% for article in journal_articles %}
      <div class="flex items-center gap-4 rounded-xl" 
           hx-get="/articles/{{ article.id }}/peek" 
           hx-trigger="mouseenter" 
           hx-target="#peek-article-{{ article.id }}" 
           hx-swap="afterend">
        <div class="flex-2 flex flex-col gap-1">
          <p class="text-base font-bold text-[#141414]">{{ article.title }}</p>
          <p class="text-sm text-neutral-500">{{ article.author }}</p>
        </div>
        <div class="flex-1 aspect-video bg-cover rounded-xl" style="background-image: url('{{ article.image_url }}');"></div>
      </div>
      <div id="peek-article-{{ article.id }}" class="absolute z-10 bg-white shadow-lg hidden"></div>
      {% endfor %}
    </div>
  </div>

  <!-- Bottom Nav -->
  <div>
    <div class="flex justify-between items-center border-t bg-neutral-50 p-4 gap-2">
      <a href="#" class="flex flex-col items-center text-[#141414] gap-1">
        <!-- Briefcase icon -->
        <p class="text-xs font-medium">Workstation</p>
      </a>
      <a href="#" class="flex flex-col items-center text-neutral-500 gap-1">
        <!-- Plus icon -->
        <p class="text-xs font-medium">Add Case</p>
      </a>
      <a href="#" class="flex flex-col items-center text-neutral-500 gap-1">
        <!-- Storefront icon -->
        <p class="text-xs font-medium">Marketplace</p>
      </a>
    </div>
    <div class="h-5 bg-neutral-50"></div>
  </div>
</div>
{% endblock %}

{% block extra_scripts %}
<script>
function surgifyApp() {
    return {
        showInsightsModal: false,
        init() {
            // Initialize any data or event listeners
            console.log('Surgify app initialized');
        }
    }
}
</script>
{% endblock %}
